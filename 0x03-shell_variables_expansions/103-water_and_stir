#!/bin/bash
w_base=waetr
s_base=triti.
o_base=bestchol

# Convert a base string to decimal
convert_to_decimal() {
    local input=$1
    local base_chars=$2
    local base=${#base_chars}
    local decimal=0
    local i char index power

    for (( i=0; i<${#input}; i++ )); do
        char="${input:$i:1}"
        index=$(expr index "$base_chars" "$char" - 1)
        power=$(( ${#input} - i - 1 ))
        decimal=$(( decimal + index * base ** power ))
    done

    echo "$decimal"
}

# Convert decimal to custom base
convert_from_decimal() {
    local num=$1
    local base_chars=$2
    local base=${#base_chars}
    local result=""

    while [ "$num" -gt 0 ]; do
        rem=$(( num % base ))
        result="${base_chars:$rem:1}$result"
        num=$(( num / base ))
    done

    echo "${result:-${base_chars:0:1}}"
}

# Main logic
w_dec=$(convert_to_decimal "$WATER" "$w_base")
s_dec=$(convert_to_decimal "$STIR" "$s_base")
sum=$(( w_dec + s_dec ))
convert_from_decimal "$sum" "$o_base"
